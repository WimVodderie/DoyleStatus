# get source from github
git clone www.github.com\WimVodderie\DoyleStatus
# create virtual environment (may need to 'apt instal python3-venv python3-pip' first)
python3 -m venv venv

# activate the virtual environment (in cmd.exe)
cmd.exe: .\venv\Scripts\Activate.bat
powershell: .\venv\Scripts\Activate.ps1
linux: source ./venv/bin/activate

# install flask
-> see requirements.txt

- useful:
    start DoyleStatus.py in tmux and press "Ctrl+b" d to detach session, keeps running in the background
    "tmux attach" after login to get back

# to run pytest in the virtual environment, add -v for more info
either:
    python -m unittest discover
or:
    python -m pytest
or with coverage:
    # pip install pytest-cov first
    python -m pytest --cov=app
    coverage html # -> creates htmlcov folder

even easier:
    py.test


##
## DOCKER
##
goal: run docker on rpi so I can use docker images to run the trafficlight and pole apps

- install fresh raspbian lite
- sudo apt-get update && sudo apt-get upgrade
- change username pi -> dfe01, password raspberry -> <default for dfe01>
@ https://thepihut.com/blogs/raspberry-pi-tutorials/how-to-change-the-default-account-username-and-password
    sudo passwd root
    logout
    # login as root
    usermod -l dfe01 pi
    usermod -m -d /home/dfe01 dfe01
    logout
    # login as dfe01
    passwd

- install docker
@ https://phoenixnap.com/kb/docker-on-raspberry-pi
    curl -fsSL https://get.docker.com -o get-docker.sh
    sudo sh get-docker.sh
    sudo usermod -aG docker dfe01
    logout
    # login as dfe01
    docker version

- install docker-compose
    sudo pip3 install docker-compose

- install git
    sudo apt install git

- clone DoyleStatus
    git clone https://github.com/WimVodderie/DoyleStatus.git

- create docker image
    docker build .

- run docker image (with input to simulation folder)
    docker run -v ~/DoyleStatus/TestData:/usr/src/DoyleData -p 8080:8080 <image name>


